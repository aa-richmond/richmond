(()=>{function i(e,t){var r,n,i=e;if(void 0!==window.aspnetValidation){var a=new aspnetValidation.ValidationService,o=function(e,t){if("checkbox"!==t.type.toLowerCase()&&"radio"!==t.type.toLowerCase())return Boolean(e);for(var r=t.form.querySelectorAll("input[name='"+t.name+"']"),n=0;n<r.length;n++)if(!0===r[n].checked)return!0;return!1},l=(a.addProvider("requiredcb",o),a.addProvider("required",o),a.addProvider("umbracoforms_regex",function(e,t,r){return!e||!r.pattern||new RegExp(r.pattern).test(e)}),window.addEventListener("load",function(){for(var e in a.providers)a.providers[e]=(n=>function(e,t,r){return null===t.offsetParent||n(e,t,r)})(a.providers[e])}),a.bootstrap(),window.umbracoFormsValidationService=a,function(){this.form.elements.PreviousClicked.value="clicked"}),s=document.querySelectorAll("[data-umb='prev-forms-form']");0===s.length&&(s=document.getElementsByClassName("prev cancel"));for(var d=0;d<s.length;d++)s[d].form.elements.PreviousClicked.value="",s[d].addEventListener("click",l,!1);r=f();for(let e=0;e<r.length;e++)(n=r[e]).addEventListener("click",function(e){e.preventDefault();var n=e.currentTarget.form,o=m(n,i);a.validateForm(n,e=>{var t=p(n,o,"aspnet-client-validation",a);if(e=e&&t){v(n);var r=n.querySelectorAll("[type=submit]:not(.cancel)");for(let e=0;e<r.length;e++)r[e].setAttribute("disabled","disabled")}})})}else if("function"==typeof jQuery&&$.validator&&$.validator.unobtrusive){$.validator.setDefaults({ignore:":hidden"}),$.validator.unobtrusive.adapters.addBool("requiredcb","required"),$.validator.addMethod("umbracoforms_regex",function(e,t){var r=$(t).attr("data-regex"),t=$(t).val();return 0===t.length||t.match(r)}),$.validator.unobtrusive.adapters.addBool("regex","umbracoforms_regex"),r=f();for(let e=0;e<r.length;e++)(n=r[e]).addEventListener("click",function(e){e.preventDefault();var e=$(this).closest("form"),t=(g(e[0]),e.validate()),r=m(e[0],i),n=e.valid(),r=p(e[0],r,"jquery",t);n&&r&&(v(e),this.setAttribute("disabled","disabled"))}.bind(n))}for(var u=0;u<e.length;u++)c({form:e[u]},t)}function c(e,t){for(var r,n,o,i,a=t?e.form:JSON.parse(decodeURI(e.form)),l=document.querySelectorAll(".umbraco-forms-form"),s=0;s<l.length;s++){var d=l[s];a.disableValidationDependencyCheck||(r=d,i=o=n=void 0,"undefined"!=typeof Umbraco&&void 0!==Umbraco.Sys)||"tinymce"===document.body.id||((n=document.createElement("div")).className="umbraco-forms missing-library",n.style.color="#fff",n.style.backgroundColor="#9d261d",n.style.padding="15px",n.style.margin="10px 0",o="",!r)||0<r.getElementsByClassName("umbraco-forms missing-library").length||((i=!1)===(i=window.jQuery&&$&&void 0!==$.validator||void 0!==window.aspnetValidation?!0:i)&&(o+="Umbraco Forms requires a validation framework to run, please read documentation for posible options."),""!==o&&(n.innerHTML=o+'<br/> <a href="https://docs.umbraco.com/umbraco-forms/developer/prepping-frontend" target="_blank" style="text-decoration:underline; color:#fff;">See Umbraco Forms Documentation</a>',r.insertBefore(n,r.childNodes[0]))),new h(d.querySelector(".umbraco-forms-page"),a.pageButtonConditions,a.fieldSetConditions,a.fieldConditions,a.triggerConditionsCheckOn&&0<a.triggerConditionsCheckOn.length?a.triggerConditionsCheckOn:"change",a.recordValues,a.formElementHtmlIdPrefix).watch(),(e=>{var t;"MutationObserver"in window!=!1&&(void 0!==window.aspnetValidation&&(t=e.getElementsByTagName("form")[0]).addEventListener("submit",function(){g(t)},!1),new MutationObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t];if("field-validation-error"===r.target.className){a=i=o=n=void 0;for(var n=r.target,o=n.previousElementSibling;o;){if("input"===o.tagName.toLowerCase()||"textarea"===o.tagName.toLowerCase()||"select"===o.tagName.toLowerCase()){o.focus();break}if(o.classList.contains("radiobuttonlist")||o.classList.contains("checkboxlist")){for(var i=0;i<o.children.length;i++){var a=o.children[i];if("input"===a.tagName.toLowerCase()){a.focus();break}}break}o=o.previousElementSibling}break}}}).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1,subtree:!0}))})(d)}}function f(){return document.querySelectorAll(".umbraco-forms-form [type=submit]:not(.cancel)")}function m(t,e){var o,e=e.filter(e=>e.formId===t.FormId.value.replaceAll("-",""));return 0<e.length&&e[0].validationRules?(e=structuredClone(e[0].validationRules),o=new FormData(t),e.map(e=>{var t,r=o,n=e.rule;for(t of r)n=n.replaceAll("{"+t[0]+"}",t[1]);return e.rule=n,e})):[]}function p(e,t,r,n){if("undefined"==typeof jsonLogic)return!0;for(var o=!0,i=0;i<t.length;i++){var a,l=t[i];if(!l.rule.match(/{({*[\w]*}*)}/)){try{a=JSON.parse(l.rule)}catch(e){continue}var s=jsonLogic.apply(a);((e,t,r,n,o)=>{var i,a;o.fieldId&&((i=e[o.fieldId]).length&&0<i.length&&(i=Array.from(i).filter(e=>e.id===o.fieldId)[0]),"aspnet-client-validation"===t?n?(a=d(i,"error"))&&a.innerText===o.errorMessage&&r.removeError(i):r.addError(i,o.errorMessage):"jquery"===t&&(r=e.querySelector(".validation-summary-errors ul"),(n?((a=d(i,"error"))&&a.innerText===o.errorMessage&&(a.classList.remove("field-validation-error"),a.classList.add("field-validation-valid"),a.innerText=""),u):((a=d(i,"valid"))&&(a.classList.remove("field-validation-valid"),a.classList.add("field-validation-error"),a.innerText=o.errorMessage),(e,t)=>{u(e,t),e&&((t=document.createElement("li")).appendChild(document.createTextNode(validationRule.errorMessage)),e.appendChild(t))}))(r,o.errorMessage)))})(e,r,n,s,l),o=o&&s}}return o}function d(e,t){return e.closest(".umbraco-forms-field-wrapper").querySelector(".field-validation-"+t)}function u(e,t){e&&e.querySelectorAll("li").forEach(e=>{e.innerText===t&&e.remove()})}function v(e){e.requestSubmit?e.requestSubmit():e.submit()}function g(e){for(var t=e.getElementsByClassName("field-validation-error"),r=0;r<t.length;r++)t[r].className="field-validation-valid"}function h(e,t,r,n,o,i,a){var p={};function l(e,t,r){var n=e.querySelectorAll("select");for(let e=0;e<n.length;e++){var o=n[e];t[o.getAttribute("id")]=o.value,r[o.getAttribute("id")]="select"}var i=e.querySelectorAll("textarea");for(let e=0;e<i.length;e++){var a=i[e];t[a.getAttribute("id")]=a.value,r[a.getAttribute("id")]="textarea"}function l(e){return(e=e.getAttribute("id").split("_")).slice(0,e.length-1).join("_")}var s=e.querySelectorAll("input[type=checkbox]");for(let e=0;e<s.length;e++){var d,u=s[e];u.getAttribute("id")!==p.formElementHtmlIdPrefix+u.getAttribute("name")?(t[d=l(u)]=null,r[d]="checkbox"):(t[u.getAttribute("id")]=null,r[u.getAttribute("id")]="checkbox")}var c=e.querySelectorAll("input");for(let e=0;e<c.length;e++){var f,m=c[e];"text"!==m.getAttribute("type")&&"number"!==m.getAttribute("type")&&"email"!==m.getAttribute("type")&&"url"!==m.getAttribute("type")&&"tel"!==m.getAttribute("type")&&"time"!==m.getAttribute("type")&&"date"!==m.getAttribute("type")&&"datetime-local"!==m.getAttribute("type")&&"hidden"!==m.getAttribute("type")||(t[m.getAttribute("id")]=m.value,r[m.getAttribute("id")]="text"),"radio"===m.getAttribute("type")&&m.matches(":checked")&&(t[f=l(m)]=m.value,r[f]="radio"),"checkbox"===m.getAttribute("type")&&(m.getAttribute("id")!==p.formElementHtmlIdPrefix+m.getAttribute("name")?(f=l(m),m.matches(":checked")&&(null===t[f]?t[f]=m.value:t[f]+=";;"+m.value)):t[m.getAttribute("id")]=m.matches(":checked")?"true":"false")}}return p.form=e,p.pageButtonConditions=t,p.fieldsetConditions=r,p.fieldConditions=n,p.triggerConditionsCheckOn=o,p.values=i,p.formElementHtmlIdPrefix=a,p.dataTypes={},p.operators={Is:function(e,t){if((e||"")===t)return!0;if(null==e)return t==e;"TRUE"===t.toUpperCase()||"ON"===t.toUpperCase()?t="true":"FALSE"!==t.toUpperCase()&&"OFF"!==t.toUpperCase()||(t="false");e=(e="true;;false"===e?"true":e).split(";;");return e.filter(function(e){return e===t}).length===e.length},IsNot:function(e,t,r){var n,o;return null==e?t!=e:(o=(n=(e="true;;false"===e?"true":e).split(";;")).filter(function(e){return e===t}),"checkbox"===r&&("TRUE"===t.toUpperCase()||"ON"===t.toUpperCase()?t="true":"FALSE"!==t.toUpperCase()&&"OFF"!==t.toUpperCase()||(t="false")),(e||"")!==t&&o.length!=n.length)},GreaterThen:function(e,t){return isNaN(e)||isNaN(t)?t<e:parseInt(e)>parseInt(t)},LessThen:function(e,t){return isNaN(e)||isNaN(t)?e<t:parseInt(e)<parseInt(t)},StartsWith:function(e,t){return e&&e.startsWith(t)},EndsWith:function(e,t){return e&&e.endsWith(t)},Contains:function(e,t){return e&&-1<e.indexOf(t)},ContainsIgnoreCase:function(e,t){return e&&t&&0<=e.toUpperCase().indexOf(t.toUpperCase())},StartsWithIgnoreCase:function(e,t){return e&&t&&e.toUpperCase().startsWith(t.toUpperCase())},EndsWithIgnoreCase:function(e,t){return e&&t&&e.toUpperCase().endsWith(t.toUpperCase())},NotContains:function(e,t){return!e||t&&e.indexOf(t)<0},NotStartsWith:function(e,t){return!e||t&&!e.startsWith(t)},NotEndsWith:function(e,t){return!e||t&&!e.endsWith(t)},NotContainsIgnoreCase:function(e,t){return!e||t&&e.toUpperCase().indexOf(t.toUpperCase())<0},NotStartsWithIgnoreCase:function(e,t){return!e||t&&!e.toUpperCase().startsWith(t.toUpperCase())},NotEndsWithIgnoreCase:function(e,t){return!e||t&&!e.toUpperCase().endsWith(t.toUpperCase())}},p.watch=function(){var t=p.form.querySelectorAll(".datepickerfield");for(let e=0;e<t.length;e++){var r=t[e];r.addEventListener("blur",function(){var e;""===this.value&&(e=this.getAttribute("id")+"_1",p.values[e]="",document.getElementById(e).value=""),l(p.form,p.values,p.dataTypes),p.run()}.bind(r))}var n=p.form.querySelectorAll("input, textarea, select");for(let e=0;e<n.length;e++){var o=n[e];o.addEventListener(p.triggerConditionsCheckOn,function(){l(p.form,p.values,p.dataTypes),p.run()}.bind(o))}l(p.form,p.values,p.dataTypes),p.run()},p.run=function(){var e,t,r,n,o,i={};function d(e){var t,r=!0;return!!(r=p.fieldConditions[e.field]?u(e.field,p.fieldConditions[e.field]):r)&&(e=p.values[p.formElementHtmlIdPrefix+(r=e).field],t=p.operators[r.operator],null!==e)&&t(e,r.value)}function a(e,t){var r="Show"===t.actionType,n=i[e],e=void 0===n?(i[e]=r,i[e]=((e,t)=>{var r,n,o="Any"===t.logicType,i="All"===t.logicType,a={},l=!1,s=!0;if(0===t.rules.length)return!1;for(n=0;n<t.rules.length;n++){if(e===(r=t.rules[n]).field||e===r.fieldsetId)throw new Error("Field or fieldset "+e+" has a condition on itself.");void 0===a[r.fieldsetId]&&(p.fieldsetConditions[r.fieldsetId]?(a[r.fieldsetId]=u(r.fieldsetId,p.fieldsetConditions[r.fieldsetId]),a[r.fieldsetId]||(l=!0)):a[r.fieldsetId]=!0)}if(i&&l)return!1;for(n=0;n<t.rules.length&&(s=!!a[(r=t.rules[n]).fieldsetId]&&d(t.rules[n]),!o||!s)&&(!i||s);n++);return s})(e,t)):n;return!(e^r)}function u(e,t){return!t||a(e,t)}function l(e,t,r){t=u(t,r);e&&(t?e.classList.remove("umbraco-forms-hidden"):e.classList.add("umbraco-forms-hidden"))}for(e in p.pageButtonConditions)Object.prototype.hasOwnProperty.call(p.pageButtonConditions,e)&&(o=document.getElementById(e))&&l(o.querySelector("input[name='__next'], button[name='__next'], input[data-form-navigate='next'], button[data-form-navigate='next']"),e,p.pageButtonConditions[e]);for(r in p.fieldsetConditions)Object.prototype.hasOwnProperty.call(p.fieldsetConditions,r)&&(t=p.formElementHtmlIdPrefix+r,l(document.getElementById(t),r,p.fieldsetConditions[r]));for(n in p.fieldConditions)Object.prototype.hasOwnProperty.call(p.fieldConditions,n)&&(t=p.formElementHtmlIdPrefix+n,document.getElementById(t))&&l(document.getElementById(t).closest(".umbraco-forms-field"),n,p.fieldConditions[n])},p}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementsByClassName("umbraco-forms-form-config");if(0<e.length){for(var t=[],r=0;r<e.length;r++){var n=e[r],n={formId:n.dataset.id,pageButtonConditions:JSON.parse(n.dataset.serializedPageButtonConditions),fieldSetConditions:JSON.parse(n.dataset.serializedFieldsetConditions),fieldConditions:JSON.parse(n.dataset.serializedFieldConditions),triggerConditionsCheckOn:n.dataset.triggerConditionsCheckOn,disableValidationDependencyCheck:"true"===n.dataset.disableValidationDependencyCheck,recordValues:JSON.parse(n.dataset.serializedFieldsNotDisplayed),formElementHtmlIdPrefix:n.dataset.formElementHtmlIdPrefix,validationRules:n.dataset.serializedValidationRules?JSON.parse(n.dataset.serializedValidationRules):[]};t.push(n)}i(t,!0)}else"undefined"==typeof umbracoFormsCollection?document.addEventListener("umbracoFormLoaded",c):i(umbracoFormsCollection);var o=document.getElementById("umbraco-forms-form-submitted");o&&(o=>{function i(e){for(var t=0,r=0;r<e.length;r++){var n=(e=>{for(var t=e;"BODY"!==t.tagName;){if(t.classList.contains("umbraco-forms-field"))return t;t=t.parentNode}return e})(e[r]).getBoundingClientRect().top;0<n&&(n<t||0===t)&&(t=n)}0<t&&window.scrollTo(0,t)}function a(e){e.scrollIntoView({behavior:"auto",block:"start"})}document.onreadystatechange=function(){var e,t,r,n;"complete"==document.readyState&&(e=document.querySelectorAll(".field-validation-error"),t=document.querySelectorAll(".umbraco-forms-submitmessage"),r=document.querySelectorAll(".umbraco-forms-submitmessage-html"),n=document.getElementById("umbraco_form_"+o),0<e.length?i(e):0<t.length?a(t[0].parentElement):0<r.length?a(r[0]):n&&a(n))}})(o.dataset.formClientId)})})();